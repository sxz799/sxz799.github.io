---
title: JSP-JDBC连接池的使用
copyright: true
date: 2020-05-28 15:40:31
tags:
- JDBC连接池
- 数据库
categories:
- JAVA
comments:
password:
---

## 一、添加maven依赖
如何使用maven不做详细介绍，这里只记录下大体过程，方便以后查找使用
在项目的pom.xml文件的  <dependencies>标签中添加如下依赖
```
	//mysql链接驱动
	<dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.25</version>
    </dependency>
    //druid连接池jar包
    <!-- https://mvnrepository.com/artifact/com.alibaba/druid -->
    <dependency>
      <groupId>com.alibaba</groupId>
      <artifactId>druid</artifactId>
      <version>1.1.10</version>
    </dependency>
```
## 二、配置druid的配置文件
在resources资源目录下添加conf.properties配置文件，内容如下：
```
driverClassName=com.mysql.jdbc.Driver
url=jdbc:mysql://192.168.200.100:3306/wdadmin?useSSL=false
username=root
password=123456
initialSize=5
maxActive=10
maxWait=3000
```
## 三、构建druid连接池工具类
```
import com.alibaba.druid.pool.DruidDataSourceFactory;
import javax.sql.DataSource;
import java.io.IOException;
import java.sql.*;
import java.util.Properties;

/**
 * 使用连接池与数据库链接
 */
public class DBHelper {
    private static DataSource ds; //创建静态连接池对象
    static {
        try {
        	//加载配置文件
            Properties pro=new Properties();
            pro.load(DBHelperAdmin.class.getClassLoader().getResourceAsStream("conf.properties"));
            //获取连接池对象
            ds= DruidDataSourceFactory.createDataSource(pro);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    public static Connection getConnection throws SQLException {
    	//获取连接对象
        return ds.getConnection();
    }
    public static DataSource getDataSource throws SQLException {
    	//获取连接池对象
        return ds;
    }
    /**
     * 重载链接关闭函数
     */
    public static void DBClose(ResultSet rs) {
        if (rs != null) {
            try {
                rs.close();
                rs = null;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static void DBClose(PreparedStatement ps) {
        if (ps != null) {
            try {
                ps.close();
                ps = null;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static void DBClose(Statement ps) {
        if (ps != null) {
            try {
                ps.close();
                ps = null;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static void DBClose(Connection conn) {
        if (conn != null) {
            try {
                conn.close();
                conn = null;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
}


```
